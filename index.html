<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>WE'RE NUTS</title>
    
    <!-- PWA iOS -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="WE'RE NUTS">
    
    <!-- Ícones e Fontes -->
    <link rel="apple-touch-icon" href="https://raw.githubusercontent.com/lucasmaia2709-lang/nuts/refs/heads/main/nuts.png">
    <link rel="icon" type="image/png" href="https://raw.githubusercontent.com/lucasmaia2709-lang/nuts/refs/heads/main/nuts.png">
    
    <!-- FONTES -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Raleway:wght@300;400;500;600;700;800&family=Cormorant+Garamond:wght@300;400;500&family=Major+Mono+Display&display=swap" rel="stylesheet">
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <!-- CSS Externo -->
    <link rel="stylesheet" href="style.css?v=2">

    <!-- CORREÇÃO DE OVERSCROLL (FIX DO FUNDO AZUL APARECENDO) -->
    <style>
        html, body {
            overscroll-behavior: none;
        }
    </style>
</head>
<body>

    <div id="toast-container"></div>

    <!-- 0. LANDING -->
    <div id="view-landing" class="screen active" style="background:#9cafcc;align-items: center; justify-content: center; text-align: center;">
        <div class="logo-container-large">
            <span class="logo-were">WE'RE</span><br>
            <span class="logo-nuts">nuts</span>
        </div>
        <p style="color: #ffff; letter-spacing: 2px; font-size: 12px; margin-top: 10px; font-weight: 600;">Sua jornada começa agora</p>
        <div style="width: 100%; margin-top: 80px;">
            <button onclick="window.app.goToRegister()" class="btn btn-primary" style="margin-bottom: 15px; background: #1b265b; box-shadow:none; border:2px solid #FFF;">Começar Agora</button>
            <button onclick="window.app.goToLogin()" class="btn btn-text" style="color: #dbffae;">Já tenho conta</button>
        </div>
    </div>

    <!-- 1. LOGIN -->
    <div id="view-login" class="screen" style="background:#9cafcc;justify-content: center; padding: 40px;">
        <button onclick="window.app.goToLanding()" style="position:absolute; top:50px; left:20px; border:none; background:none; font-size:24px; color:var(--text-main);"><i class="fa-solid fa-arrow-left"></i></button>
        <h1 style="font-size: 32px; margin-bottom: 40px; text-align:center; color: #dbffae;">Login</h1>
        <form onsubmit="window.app.handleLogin(event)">
            <div class="input-group"><label class="label">Email</label><input type="email" id="log-email" class="input" required></div>
            <div class="input-group"><label class="label">Senha</label><input type="password" id="log-pass" class="input" required></div>
            <button type="submit" class="btn btn-primary" style="margin-top: 20px; background: #dbffae; color:#ff66c4">Entrar</button>
        </form>
        <p onclick="window.app.forgotPassword()" style="text-align: center; color:#1b265b; font-size: 13px; margin-top: 20px; cursor: pointer; text-decoration: underline;">Esqueci minha senha</p>
    </div>

    <!-- 2. CADASTRO -->
    <div id="view-register" class="screen" style="background:#9cafcc;justify-content: center; padding: 40px;">
        <button onclick="window.app.goToLanding()" style="position:absolute; top:50px; left:20px; border:none; background:none; font-size:18px; color:var(--text-main);"><i class="fa-solid fa-arrow-left"></i></button>
        <h1 style="font-size: 32px; margin-bottom: 40px; text-align:center; color: #dbffae;">Criar Conta</h1>
        <form onsubmit="window.app.handleRegister(event)">
            <div class="input-group"><label class="label">Nome</label><input type="text" id="reg-name" class="input" required></div>
            <div class="input-group"><label class="label">Email</label><input type="email" id="reg-email" class="input" required></div>
            <div class="input-group"><label class="label">Senha</label><input type="password" id="reg-pass" class="input" required></div>
            <button type="submit" class="btn btn-primary" style="margin-top: 20px;background: #dbffae;color:#ff66c4">Cadastrar</button>
        </form>
    </div>

    <!-- 3. PENDENTE -->
    <div id="view-pending" class="screen" style="align-items: center; justify-content: center; padding: 40px; text-align: center;">
        <div style="background:#FFF; padding:40px; border-radius:30px; box-shadow:var(--shadow);">
            <i class="fa-regular fa-clock" style="font-size: 50px; color: var(--primary); margin-bottom: 20px;"></i>
            <h2 style="color:var(--text-main);">Aprovação Pendente</h2>
            <p style="color: var(--text-sec); font-size: 14px;">Seu treinador precisa liberar seu acesso.</p>
            <button onclick="window.app.logout()" class="btn btn-outline" style="margin-top: 30px;">Sair</button>
        </div>
    </div>

    <!-- 4. APP PRINCIPAL -->
    <div id="view-app" class="screen">
        <div class="app-header">
            <div class="header-avatar" onclick="window.app.openProfile()">
                <img id="header-avatar-img" src="" style="width:100%; height:100%; object-fit:cover; display:none;">
                <span id="header-avatar-txt">U</span>
            </div>
            
            <div class="logo-container-small">
                <span class="logo-nuts-small">nuts</span>
            </div>

            <div style="width: 40px; display: flex; justify-content: flex-end;">
                 <button id="btn-admin-access" onclick="window.app.loadAdmin()" style="border:none; background:none; color:var(--primary); font-size:18px; display:none;"><i class="fa-solid fa-lock"></i></button>
            </div>
        </div>

        <div id="main-scroll">
            <div id="tab-home" class="tab-content">
                <div class="calendar-wrapper">
                    <div class="calendar-header">
                        <button onclick="window.app.changeMonth(-1)" style="border:none; background:none; padding:10px; cursor:pointer;"><i class="fa-solid fa-chevron-left" style="color:var(--text-main);"></i></button>
                        <span id="cal-month-title" class="calendar-title">Mês</span>
                        <button onclick="window.app.changeMonth(1)" style="border:none; background:none; padding:10px; cursor:pointer;"><i class="fa-solid fa-chevron-right" style="color:var(--text-main);"></i></button>
                    </div>
                    <div class="calendar-grid" style="margin-bottom: 5px;">
                        <div class="cal-head-day">D</div><div class="cal-head-day">S</div><div class="cal-head-day">T</div><div class="cal-head-day">Q</div><div class="cal-head-day">Q</div><div class="cal-head-day">S</div><div class="cal-head-day">S</div>
                    </div>
                    <div id="calendar-days" class="calendar-grid"></div>
                </div>
                <div style="padding: 20px;">
                <div class="card" style="background: #9cafcc;color: var(--text-main); border: none; padding: 30px; text-align: center; margin-bottom: 20px;">
                        <h3 style="font-size: 14px; margin: 0 0 20px; opacity: 0.7; color:var(--text-main);">Motivação do Dia</h3>
                        <i class="fa-solid fa-quote-left" style="color: rgba(255,255,255,0.5); font-size: 32px;"></i>
                        <p id="daily-quote" style="font-style: italic; font-size: 20px; margin: 20px 0 10px; line-height: 1.4; color:var(--text-main);">Carregando...</p> 
                </div>
                </div>
                <div style="padding: 0 20px;">
                    <h3 style="font-size: 18px; margin: 10px 0 15px; color:var(--text-main);">Treino de Hoje</h3>
                    <div id="today-workout-card"></div>
                    <div id="home-latest-news" style="margin-top: 30px;"></div>
                </div>
            </div>

            <div id="tab-workouts" class="tab-content hidden" style="padding: 0 20px;">
                <h2 style="margin: 20px 0; color:var(--text-main);">Meu Plano</h2>
                <div id="workouts-list"></div>
            </div>

            <div id="tab-social" class="tab-content hidden" style="padding: 0 20px;">
                <div style="display:flex; justify-content:space-between; align-items:center; margin: 20px 0;">
                    <h2 style="margin:0; color:var(--text-main);">Comunidade</h2>
                    <button onclick="window.app.openCreatePost()" class="btn-primary" style="width: auto; padding: 8px 16px; border-radius: 20px; font-size: 12px; border:none; cursor:pointer;"><i class="fa-solid fa-plus"></i> Novo</button>
                </div>
                <div id="social-feed"></div>
            </div>

            <div id="tab-news" class="tab-content hidden" style="padding: 0 20px;">
                <h2 style="margin: 20px 0; color:var(--text-main);">Novidades</h2>
                <div id="news-feed"></div>
            </div>
        </div>

        <div class="nav-bar">
            <button class="nav-item" onclick="window.app.nav('social')" data-tab="social"><i class="fa-solid fa-users"></i></button>
            <button class="nav-item active" onclick="window.app.nav('home')" data-tab="home"><i class="fa-solid fa-house"></i></button>
            <button class="nav-item" onclick="window.app.nav('workouts')" data-tab="workouts"><i class="fa-solid fa-person-running"></i></button>
            <button class="nav-item" onclick="window.app.nav('news')" data-tab="news"><i class="fa-solid fa-bullhorn"></i></button>
        </div>
    </div>

    <!-- MODAIS E TELAS EXTRAS -->
    
    <!-- ADICIONE background:white AQUI -->
    <div id="view-profile" class="screen full-screen" style="overflow-y: auto; -webkit-overflow-scrolling: touch; background: #FFF;">
        <div style="padding: 20px; display: flex; justify-content: space-between; align-items: center;">
            <button onclick="window.app.closeProfile()" style="border:none; background:none; font-size:24px; cursor:pointer; color:var(--text-main);"><i class="fa-solid fa-times"></i></button>
            <h3 style="margin:0;">Meu Perfil</h3>
            <button onclick="window.app.logout()" style="border:none; background:none; color:var(--red); font-weight:600; cursor:pointer;">Sair</button>
        </div>
        <div style="padding: 20px; text-align: center;">
            <div style="width: 120px; height: 120px; border-radius: 50%; background: #FFF; margin: 0 auto 20px; overflow: hidden; position: relative; cursor:pointer; border: 4px solid #FFF; box-shadow: var(--shadow);" onclick="document.getElementById('profile-upload').click()">
                <img id="profile-img-big" src="" style="width:100%; height:100%; object-fit:cover; display:none;">
                <div style="position: absolute; bottom: 0; width: 100%; background: rgba(0,0,0,0.5); color: white; font-size: 10px; padding: 4px;">ALTERAR</div>
            </div>
            <input type="file" id="profile-upload" hidden accept="image/*" onchange="window.app.uploadAvatar(this)">
            <h2 id="profile-name-big" style="margin:0; font-size:28px; color:var(--text-main);">NOME</h2>
            <p id="profile-email-big" style="color: var(--text-sec); font-size: 16px;">EMAIL</p>
            
            <!-- ÁREA DE DADOS PESSOAIS (ATUALIZADA) -->
            <div class="card" style="text-align: left; margin-top: 20px;">
                <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:15px;">
                    <h4 style="margin:0; color:var(--primary);">Dados Pessoais</h4>
                    <button id="btn-edit-profile" onclick="window.app.toggleEditProfile(true)" style="font-size:12px; color:var(--text-sec); border:1px solid var(--border); background:white; padding:4px 10px; border-radius:10px;">Alterar Perfil</button>
                </div>
                
                <div id="profile-form-container">
                    <label class="label">Data de Nascimento</label>
                    <input id="prof-birth" type="date" class="input" disabled style="margin-bottom:10px;">
                    
                    <div style="display:flex; gap:10px;">
                        <div style="flex:1;">
                            <label class="label">Cidade</label>
                            <input id="prof-city" class="input" disabled style="margin-bottom:10px;">
                        </div>
                        <div style="flex:1;">
                            <label class="label">País</label>
                            <input id="prof-country" class="input" disabled style="margin-bottom:10px;">
                        </div>
                    </div>

                    <label class="label">Altura (cm)</label>
                    <input id="prof-height" type="number" class="input" disabled style="margin-bottom:10px;">

                    <div id="profile-edit-actions" style="display:none; gap:10px; margin-top:15px;">
                        <button onclick="window.app.saveProfile()" class="btn btn-primary">Salvar</button>
                        <button onclick="window.app.toggleEditProfile(false)" class="btn btn-outline">Cancelar</button>
                    </div>
                </div>
            </div>

            <!-- CARD EXCLUSIVO DE PESO (ATUALIZADO) -->
            <div class="card" style="text-align: left; margin-top: 20px; padding: 20px;">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;">
                    <div>
                        <label class="label" style="font-size: 12px; color: var(--text-sec);">Peso Atual</label>
                        <!-- Container sem KG hardcoded -->
                        <div id="display-current-weight" style="font-size: 32px; font-weight: 700; color: var(--text-main);">
                            --
                        </div>
                    </div>
                    <button onclick="window.app.openWeightModal()" style="width: 50px; height: 50px; border-radius: 50%; background: var(--primary); color: white; border: none; font-size: 24px; cursor: pointer; box-shadow: 0 4px 10px rgba(0,0,0,0.15); display: flex; align-items: center; justify-content: center;">
                        <i class="fa-solid fa-plus"></i>
                    </button>
                </div>
                
                <div style="border-top: 1px dashed #eee; padding-top: 15px;">
                    <label class="label" style="margin-bottom: 10px; display: block; font-size: 11px; opacity: 0.7;">HISTÓRICO</label>
                    <div id="weight-history-list" style="max-height: 150px; overflow-y: auto;">
                        <!-- JS vai popular aqui -->
                    </div>
                </div>
            </div>

            <button id="btn-add-race" onclick="window.app.showAddRaceModal()" class="btn btn-primary" style="margin-top: 30px;">+ Novo Objetivo</button>

            <div class="card" style="margin-top: 40px; text-align: left;">
                <h4 style="margin-top:0; color:var(--primary);">Histórico de Provas</h4>
                <div id="profile-history"></div>
            </div>
        </div>
    </div>

    <div id="view-news-detail" class="screen detail-view">
        <button onclick="window.app.closeNewsDetail()" style="position:absolute; top:40px; left:20px; z-index:10; background:white; border:none; width:45px; height:45px; border-radius:50%; box-shadow:0 5px 15px rgba(0,0,0,0.1); cursor:pointer; display:flex; justify-content:center; align-items:center;"><i class="fa-solid fa-arrow-left" style="color:var(--text-main);"></i></button>
        <div id="news-det-img-container" style="width:100%; height:350px; background:grey; background-size:cover; background-position:center; background-color: #EEE; display: none;"></div>
        <div style="background:var(--bg); border-radius:30px 30px 0 0; margin-top:-40px; padding:30px; position:relative; min-height:500px; padding-top: 50px;">
            <div id="news-det-date" style="font-size: 12px; color: var(--text-sec); font-weight: 700; margin-bottom: 10px;">DATA</div>
            <h1 id="news-det-title" style="margin:0 0 20px 0; color:var(--text-main); line-height: 1.3;">TITULO</h1>
            <div id="news-det-body" style="color:var(--text-main); line-height:1.6; font-size: 16px; white-space: pre-line;">
                Corpo da notícia...
            </div>
        </div>
    </div>

    <div id="view-create-post" class="screen full-screen">
        <div style="padding: 15px 20px; display: flex; justify-content: space-between; border-bottom: 1px solid var(--border); padding-top:max(15px, env(safe-area-inset-top));">
            <button onclick="window.app.closeCreatePost()" class="btn-text" style="padding:10px; font-weight:600;">Cancelar</button>
            <strong style="font-size:18px; color:var(--text-main);">Criar Post</strong>
            <button id="btn-submit-post" onclick="window.app.submitPost()" style="border:none; background:var(--primary); color:white; padding: 8px 20px; border-radius: 20px; font-weight:600; cursor:pointer;">Postar</button>
        </div>
        <textarea id="post-text" style="width:100%; height:200px; border:none; padding:25px; font-family:var(--font-main); font-size:18px; outline:none; resize:none; background:transparent; color:var(--text-main);" placeholder="No que você está pensando?"></textarea>
        <div style="padding: 20px;">
            <div id="post-img-preview" style="width:100%; height:200px; background:#fff; border-radius:20px; display:none; background-size:cover; background-position:center; margin-bottom:20px;"></div>
            <button onclick="document.getElementById('post-file').click()" class="btn btn-outline" style="border-radius:30px; background:#fff;"><i class="fa-solid fa-camera"></i>&nbsp; Adicionar Foto</button>
            <input type="file" id="post-file" hidden accept="image/*" onchange="window.app.previewPostImg(this)">
        </div>
    </div>

    <!-- UTILS -->
    <div id="modal-video" class="modal-overlay">
        <div style="width: 100%; max-width: 800px; aspect-ratio: 16/9; background: #000; position: relative; border-radius:20px; overflow:hidden;">
            <button onclick="document.getElementById('modal-video').classList.remove('active'); document.getElementById('video-container').innerHTML='';" style="position: absolute; top: 15px; right: 15px; color: white; background: rgba(0,0,0,0.5); width:35px; height:35px; border-radius:50%; border: none; font-size: 18px; cursor:pointer; z-index:10;">✕</button>
            <div id="video-container" style="width:100%; height:100%;"></div>
        </div>
    </div>
    
    <div id="modal-day-detail" class="modal-overlay">
        <div class="modal-card">
            <h3 id="day-det-title" style="color:var(--primary);">Detalhes do Dia</h3>
            <div id="day-det-content"></div>
            <textarea id="day-det-note" class="input" placeholder="Anotações / Feedback..." style="height:120px; resize:none; margin-top:15px;"></textarea>
            <div style="display:flex; gap:10px; margin-top:20px;">
                <button onclick="document.getElementById('modal-day-detail').classList.remove('active')" class="btn btn-outline">Fechar</button>
                <button onclick="window.app.saveDayNote()" class="btn btn-primary">Salvar Nota</button>
            </div>
        </div>
    </div>

    <!-- MODAL EDITAR DATA PROVA (NOVO) -->
    <div id="modal-edit-date" class="modal-overlay">
        <div class="modal-card">
            <h3 style="color:var(--text-main);">Alterar Data da Prova</h3>
            <label class="label">Nova Data</label>
            <input type="date" id="edit-race-date-input" class="input" style="margin-bottom:20px;">
            <div style="display:flex; gap:10px;">
                <button onclick="window.app.saveRaceDate()" class="btn btn-primary">Salvar</button>
                <button onclick="document.getElementById('modal-edit-date').classList.remove('active')" class="btn btn-outline">Cancelar</button>
            </div>
        </div>
    </div>

    <!-- MODAL DE FEEDBACK AO CONCLUIR (NOVO) -->
    <div id="modal-finish-workout" class="modal-overlay">
        <div class="modal-card">
            <h3 style="color:var(--text-main);">Como foi o treino?</h3>
            <label class="label" style="margin-top:15px; margin-bottom:10px; display:block;">Nível de Dor (0 - 7)</label>
            <div id="pain-scale-container" style="display:flex; justify-content:center; gap: 5px; flex-wrap: wrap; margin-bottom:20px;">
                <!-- JS vai popular os botões -->
            </div>
            
            <label class="label">O que doeu? / Observações:</label>
            <textarea id="workout-feedback-text" class="input" style="height:100px; resize:none; margin-bottom:20px;" placeholder="Descreva aqui..."></textarea>
            
            <div style="display:flex; gap:10px;">
                <button onclick="window.app.confirmFinishWorkout()" class="btn btn-primary">Confirmar Conclusão</button>
                <button onclick="document.getElementById('modal-finish-workout').classList.remove('active')" class="btn btn-outline">Cancelar</button>
            </div>
        </div>
    </div>

    <!-- MODAL ADD PESO -->
    <div id="modal-add-weight" class="modal-overlay">
        <div class="modal-card">
            <h3 style="color:var(--text-main);">Registrar Peso</h3>
            <label class="label">Peso (kg)</label>
            <input type="number" id="new-weight-input" class="input" step="0.1" placeholder="Ex: 75.5" style="margin-bottom:20px;">
            <div style="display:flex; gap:10px;">
                <button onclick="window.app.saveNewWeight()" class="btn btn-primary">Salvar</button>
                <button onclick="document.getElementById('modal-add-weight').classList.remove('active')" class="btn btn-outline">Cancelar</button>
            </div>
        </div>
    </div>

    <div id="modal-prompt" class="modal-overlay">
        <div class="modal-card">
            <h3 id="prompt-title" style="color:var(--text-main);">Entrada</h3>
            <input id="prompt-input" class="input">
            <div style="display:flex; gap:10px; margin-top:10px;">
                <button id="prompt-cancel" class="btn btn-outline">Cancelar</button>
                <button id="prompt-confirm" class="btn btn-primary">OK</button>
            </div>
        </div>
    </div>

    <div id="modal-confirm" class="modal-overlay">
        <div class="modal-card">
            <h3 id="confirm-title" style="color:var(--text-main);">Tem Certeza?</h3>
            <p id="confirm-text" style="color:var(--text-sec); font-size:15px; line-height:1.5;"></p>
            <div style="display:flex; gap:10px; margin-top:20px;">
                <button id="confirm-cancel" class="btn btn-outline">Não</button>
                <button id="confirm-ok" class="btn btn-danger">Sim</button>
            </div>
        </div>
    </div>

    <div id="modal-add-single-workout" class="modal-overlay">
        <div class="modal-card">
            <h3 id="modal-workout-title" style="color:var(--text-main);">Novo Treino</h3>
            <input id="new-w-title" class="input" placeholder="Título (ex: Trote Leve)" style="margin-bottom:15px;">
            <input id="new-w-desc" class="input" placeholder="Descrição (ex: 30min Zona 2)" style="margin-bottom:15px;">
            <input id="new-w-video" class="input" placeholder="Link do Vídeo (Opcional)" style="margin-bottom:15px;">
            <div style="display:flex; gap:10px;">
                <button onclick="window.app.saveSingleWorkout()" class="btn btn-primary">Salvar</button>
                <button onclick="document.getElementById('modal-add-single-workout').classList.remove('active')" class="btn btn-outline">Cancelar</button>
            </div>
        </div>
    </div>

    <div id="modal-select-template" class="modal-overlay">
        <div class="modal-card">
            <h3 style="color:var(--text-main);">Selecionar Modelo</h3>
            <div id="template-select-list" style="max-height: 250px; overflow-y: auto; border:1px solid #eee; border-radius:15px; padding:10px; margin-bottom:20px;"></div>
            <div style="margin-bottom: 20px;">
                <label class="label">Data de Início:</label>
                <input type="date" id="template-start-date" class="input">
            </div>
            <div style="display:flex; gap:10px;">
                <button onclick="window.app.confirmTemplateImport()" class="btn btn-primary">Importar</button>
                <button onclick="document.getElementById('modal-select-template').classList.remove('active')" class="btn btn-outline">Cancelar</button>
            </div>
        </div>
    </div>

    <!-- MODAL LISTA DE VÍDEOS DE FORTALECIMENTO (NOVO) -->
    <div id="modal-strength-videos" class="modal-overlay">
        <div class="modal-card">
            <h3 style="color:var(--text-main);">Vídeos de Apoio</h3>
            <p style="font-size: 13px; color: #666; margin-bottom: 15px;">Selecione um exercício para assistir:</p>
            <div id="strength-video-list" style="max-height: 300px; overflow-y: auto;">
                <p>Carregando...</p>
            </div>
            <div style="margin-top: 15px; text-align: right;">
                <button onclick="document.getElementById('modal-strength-videos').classList.remove('active')" class="btn btn-outline">Fechar</button>
            </div>
        </div>
    </div>

    <!-- MODAL DE ADICIONAR OBJETIVO (ALUNO) -->
    <div id="modal-add-race" class="modal-overlay">
        <div class="modal-card">
            <h3 style="color:var(--text-main);">Novo Objetivo</h3>
        
            
            <label class="label">Nome da Prova</label>
            <input id="new-race-name" class="input" placeholder="Ex: Maratona do Rio" style="margin-bottom:10px;">
            
            <label class="label">Distância (KM)</label>
            <input id="new-race-dist" class="input" type="number" placeholder="Ex: 21" style="margin-bottom:10px;">
            
            <label class="label">Tempo Estimado / Ritmo</label>
            <input id="new-race-est-time" class="input" type="text" placeholder="Ex: 2h 00m ou 5:30/km" style="margin-bottom:10px;">
            
            <label class="label">Data da Prova</label>
            <input type="date" id="new-race-date" class="input" style="margin-bottom:20px;">
            
            <button onclick="window.app.addStudentRace()" class="btn btn-primary">Gerar Plano & Salvar</button>
            <button onclick="document.getElementById('modal-add-race').classList.remove('active')" class="btn btn-text">Cancelar</button>
        </div>
    </div>

    <!-- MODAL ADMIN ADD RACE (NOVO) -->
    <div id="modal-adm-add-race" class="modal-overlay">
        <div class="modal-card">
            <h3 style="color:var(--text-main);">Adicionar Objetivo (Admin)</h3>
            
            <label class="label">Nome da Prova</label>
            <input id="adm-race-name" class="input" placeholder="Ex: Maratona SP" style="margin-bottom:10px;">

            <div style="display:flex; gap:10px; margin-bottom:10px;">
                <div style="flex:1;">
                    <label class="label">Data da Prova</label>
                    <input type="date" id="adm-race-date" class="input">
                </div>
                <div style="flex:1;">
                    <label class="label">Início Treinos</label>
                    <input type="date" id="adm-start-date" class="input">
                </div>
            </div>

            <label class="label">Método</label>
            <select id="adm-race-method" class="input" style="margin-bottom:15px;" onchange="window.app.admToggleRaceMode()">
                <option value="ia">Gerar com IA</option>
                <option value="template">Usar Modelo</option>
            </select>

            <!-- IA FIELDS -->
            <div id="adm-race-ia-fields">
                <label class="label">Distância (KM)</label>
                <input id="adm-race-dist" class="input" type="number" placeholder="Ex: 42" style="margin-bottom:10px;">
                
                <label class="label">Tempo Est. / Ritmo</label>
                <input id="adm-race-time" class="input" placeholder="Ex: 4h 00m" style="margin-bottom:10px;">

                <label class="label">Vídeo de Fortalecimento (Link)</label>
                <input id="adm-race-video" class="input" placeholder="Opcional" style="margin-bottom:10px;">
            </div>

            <!-- TEMPLATE FIELDS -->
            <div id="adm-race-tpl-fields" class="hidden">
                <label class="label">Selecionar Modelo</label>
                <select id="adm-race-template-select" class="input" style="margin-bottom:10px;"></select>
            </div>

            <div style="display:flex; gap:10px; margin-top:10px;">
                <button onclick="window.app.admConfirmAddRace()" class="btn btn-primary">Criar</button>
                <button onclick="document.getElementById('modal-adm-add-race').classList.remove('active')" class="btn btn-outline">Cancelar</button>
            </div>
        </div>
    </div>

    <!-- MODAL ADMIN VER DETALHES DO TREINO (NOVO) -->
    <div id="modal-adm-workout-detail" class="modal-overlay">
        <div class="modal-card">
            <h3 id="adm-workout-det-title" style="color:var(--text-main);">Título do Treino</h3>
            <p id="adm-workout-det-desc" style="color:var(--text-sec); white-space: pre-wrap; margin: 20px 0;">Descrição...</p>
            <div id="adm-workout-det-video-container" style="display:none; margin-bottom: 20px;">
                <!-- Video Button will go here -->
            </div>
            <button onclick="document.getElementById('modal-adm-workout-detail').classList.remove('active')" class="btn btn-outline">Fechar</button>
        </div>
    </div>

    <!-- PAINEL ADMIN -->
    <div id="view-admin" class="screen full-screen">
        <div class="admin-header">
            <div style="display: flex; justify-content: space-between;">
                <span>ADMIN</span>
                <button onclick="window.app.closeAdmin()" style="color: #333; background: none; border: none; cursor:pointer;">SAIR</button>
            </div>
        </div>
        
        <div class="admin-tabs-wrapper">
            <button onclick="window.app.admTab('users')" id="btn-adm-users" class="admin-tab-btn active">USUÁRIOS</button>
            <button onclick="window.app.admTab('templates')" id="btn-adm-templates" class="admin-tab-btn">MODELOS</button>
            <button onclick="window.app.admTab('news')" id="btn-adm-news" class="admin-tab-btn">NOTÍCIAS</button>
            <button onclick="window.app.admTab('quotes')" id="btn-adm-quotes" class="admin-tab-btn">FRASES</button>
            <button onclick="window.app.admTab('videos')" id="btn-adm-videos" class="admin-tab-btn">VÍDEOS</button>
        </div>
        
        <div class="admin-content-scroll">
            <div id="adm-content-users" style="padding: 20px;">
                <h3>USUÁRIOS</h3>
                <div id="adm-users-list"></div>
            </div>
            
            <div id="adm-content-templates" class="hidden" style="padding: 20px;">
                <div style="display:flex; justify-content:space-between; align-items:center;">
                    <h3>MODELOS DE TREINO</h3>
                    <button onclick="window.app.admAddTemplateInline()" class="btn-primary" style="padding:5px 15px; font-size:12px; border-radius:20px;">+ NOVO</button>
                </div>
                <div id="adm-templates-list"></div>
            </div>
            
            <div id="adm-content-news" class="hidden" style="padding: 20px;">
                <h3>PUBLICAR NOVIDADE</h3>
                <div class="card">
                    <input id="news-title" class="input" placeholder="Título" style="margin-bottom:10px;">
                    <textarea id="news-body" class="input" placeholder="Texto..." style="margin-bottom:10px; height:100px; resize:none;"></textarea>
                    <button onclick="document.getElementById('news-file').click()" class="btn" style="border:1px solid #CCC; margin-bottom:10px;">FOTO</button>
                    <input type="file" id="news-file" hidden onchange="window.app.previewNewsImg(this)">
                    <img id="news-preview" style="width:100%; height:100px; object-fit:cover; display:none; margin-bottom:10px;">
                    <button id="btn-post-news" onclick="window.app.postNews()" class="btn btn-primary">Publicar</button>
                </div>
                <div id="adm-news-history"></div>
            </div>

            <div id="adm-content-quotes" class="hidden" style="padding: 20px;">
                <h3>FRASES MOTIVACIONAIS</h3>
                <div class="card">
                    <textarea id="adm-quote-text" class="input" placeholder="Digite a frase..." style="margin-bottom:10px; resize:none;"></textarea>
                    <button onclick="window.app.postQuote()" class="btn btn-primary">Adicionar</button>
                </div>
                <div id="adm-quotes-list"></div>
            </div>

            <div id="adm-content-videos" class="hidden" style="padding: 20px;">
                <h3>VÍDEOS DE FORTALECIMENTO</h3>
                <div class="card">
                    <input id="adm-video-title" class="input" placeholder="Título do Exercício" style="margin-bottom:10px;">
                    <input id="adm-video-link" class="input" placeholder="Link do Vídeo (Youtube/etc)" style="margin-bottom:10px;">
                    <button onclick="window.app.admAddStrengthVideo()" class="btn btn-primary">Cadastrar Vídeo</button>
                </div>
                <div id="adm-videos-list"></div>
            </div>
        </div>
    </div>

    <!-- JS MODULE LINKADO -->
    <script type="module" src="app.js?v=2"></script>
</body>
</html>
