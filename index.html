<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>WE'RE NUTS</title>
    
    <!-- PWA iOS -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="WE'RE NUTS">
    
    <!-- Ícones e Fontes -->
    <link rel="apple-touch-icon" href="https://raw.githubusercontent.com/lucasmaia2709-lang/nuts/refs/heads/main/nuts.png">
    <link rel="icon" type="image/png" href="https://raw.githubusercontent.com/lucasmaia2709-lang/nuts/refs/heads/main/nuts.png">
    
    <!-- FONTES -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Raleway:wght@300;400;500;600;700;800&family=Cormorant+Garamond:wght@300;400;500&family=Major+Mono+Display&display=swap" rel="stylesheet">
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <!-- CSS Externo -->
    <link rel="stylesheet" href="style.css?v=8">

    <style>
        html, body {
            overscroll-behavior: none;
        }
    </style>
</head>
<body>

    <div id="toast-container"></div>

    <!-- 0. LANDING -->
    <div id="view-landing" class="screen active" style="background:#9cafcc;align-items: center; justify-content: center; text-align: center;">
        <div class="logo-container-large">
            <span class="logo-were">WE'RE</span><br>
            <span class="logo-nuts">nuts</span>
        </div>
        <p style="color: #ffff; letter-spacing: 2px; font-size: 12px; margin-top: 10px; font-weight: 600;">Sua jornada começa agora</p>
        <div style="width: 100%; margin-top: 80px;">
            <button onclick="window.app.goToRegister()" class="btn btn-primary" style="margin-bottom: 15px; background: #1b265b; box-shadow:none; border:2px solid #FFF;">Começar Agora</button>
            <button onclick="window.app.goToLogin()" class="btn btn-text" style="color: #dbffae;">Já tenho conta</button>
        </div>
    </div>

    <!-- 1. LOGIN -->
    <div id="view-login" class="screen" style="background:#9cafcc;justify-content: center; padding: 40px;">
        <button onclick="window.app.goToLanding()" style="position:absolute; top:50px; left:20px; border:none; background:none; font-size:24px; color:var(--text-main);"><i class="fa-solid fa-arrow-left"></i></button>
        <h1 style="font-size: 32px; margin-bottom: 40px; text-align:center; color: #dbffae;">Login</h1>
        <form onsubmit="window.app.handleLogin(event)">
            <div class="input-group"><label class="label">Email</label><input type="email" id="log-email" class="input" required></div>
            <div class="input-group"><label class="label">Senha</label><input type="password" id="log-pass" class="input" required></div>
            <button type="submit" class="btn btn-primary" style="margin-top: 20px; background: #dbffae; color:#ff66c4">Entrar</button>
        </form>
        <p onclick="window.app.forgotPassword()" style="text-align: center; color:#1b265b; font-size: 13px; margin-top: 20px; cursor: pointer; text-decoration: underline;">Esqueci minha senha</p>
    </div>

    <!-- 2. CADASTRO -->
    <div id="view-register" class="screen" style="background:#9cafcc;justify-content: center; padding: 40px;">
        <button onclick="window.app.goToLanding()" style="position:absolute; top:50px; left:20px; border:none; background:none; font-size:18px; color:var(--text-main);"><i class="fa-solid fa-arrow-left"></i></button>
        <h1 style="font-size: 32px; margin-bottom: 40px; text-align:center; color: #dbffae;">Criar Conta</h1>
        <form onsubmit="window.app.handleRegister(event)">
            <div class="input-group"><label class="label">Nome</label><input type="text" id="reg-name" class="input" required></div>
            <div class="input-group"><label class="label">Email</label><input type="email" id="reg-email" class="input" required></div>
            <div class="input-group"><label class="label">Senha</label><input type="password" id="reg-pass" class="input" required></div>
            <button type="submit" class="btn btn-primary" style="margin-top: 20px;background: #dbffae;color:#ff66c4">Cadastrar</button>
        </form>
    </div>

    <!-- 3. PENDENTE -->
    <div id="view-pending" class="screen" style="align-items: center; justify-content: center; padding: 40px; text-align: center;">
        <div style="background:#FFF; padding:40px; border-radius:30px; box-shadow:var(--shadow);">
            <i class="fa-regular fa-clock" style="font-size: 50px; color: var(--primary); margin-bottom: 20px;"></i>
            <h2 style="color:var(--text-main);">Aprovação Pendente</h2>
            <p style="color: var(--text-sec); font-size: 14px;">Seu treinador precisa liberar seu acesso.</p>
            <button onclick="window.app.logout()" class="btn btn-outline" style="margin-top: 30px;">Sair</button>
        </div>
    </div>

    <!-- 4. APP PRINCIPAL -->
    <div id="view-app" class="screen">
        <div class="app-header">
            <div class="header-avatar" onclick="window.app.openProfile()">
                <img id="header-avatar-img" src="" style="width:100%; height:100%; object-fit:cover; display:none;">
                <span id="header-avatar-txt">U</span>
            </div>
            <div class="logo-container-small"><span class="logo-nuts-small">nuts</span></div>
            <div style="width: 40px; display: flex; justify-content: flex-end;">
                 <button id="btn-admin-access" onclick="window.app.loadAdmin()" style="border:none; background:none; color:var(--primary); font-size:18px; display:none;"><i class="fa-solid fa-lock"></i></button>
            </div>
        </div>

        <div id="main-scroll">
            <div id="tab-home" class="tab-content">
                <div class="calendar-wrapper">
                    <div class="calendar-header">
                        <button onclick="window.app.changeMonth(-1)" style="border:none; background:none; padding:10px; cursor:pointer;"><i class="fa-solid fa-chevron-left" style="color:var(--text-main);"></i></button>
                        <span id="cal-month-title" class="calendar-title">Mês</span>
                        <button onclick="window.app.changeMonth(1)" style="border:none; background:none; padding:10px; cursor:pointer;"><i class="fa-solid fa-chevron-right" style="color:var(--text-main);"></i></button>
                    </div>
                    <div class="calendar-grid" style="margin-bottom: 5px;">
                        <div class="cal-head-day">D</div><div class="cal-head-day">S</div><div class="cal-head-day">T</div><div class="cal-head-day">Q</div><div class="cal-head-day">Q</div><div class="cal-head-day">S</div><div class="cal-head-day">S</div>
                    </div>
                    <div id="calendar-days" class="calendar-grid"></div>
                </div>
                <div style="padding: 20px;">
                <div class="card" style="background: #9cafcc;color: var(--text-main); border: none; padding: 30px; text-align: center; margin-bottom: 20px;">
                        <h3 style="font-size: 14px; margin: 0 0 20px; opacity: 0.7; color:var(--text-main);">Motivação do Dia</h3>
                        <i class="fa-solid fa-quote-left" style="color: rgba(255,255,255,0.5); font-size: 32px;"></i>
                        <p id="daily-quote" style="font-style: italic; font-size: 20px; margin: 20px 0 10px; line-height: 1.4; color:var(--text-main);">Carregando...</p> 
                </div>
                </div>
                <div style="padding: 0 20px;">
                    <h3 style="font-size: 18px; margin: 10px 0 15px; color:var(--text-main);">Treino de Hoje</h3>
                    <div id="today-workout-card"></div>
                    <div id="home-latest-news" style="margin-top: 30px;"></div>
                </div>
            </div>

            <div id="tab-workouts" class="tab-content hidden" style="padding: 0 20px;">
                <h2 style="margin: 20px 0; color:var(--text-main);">Meu Plano</h2>
                <div id="workouts-list"></div>
            </div>

            <div id="tab-health" class="tab-content hidden" style="padding: 0 20px;">
                <h2 style="margin: 20px 0; color:var(--text-main);">Minha Saúde</h2>
                <div class="card" onclick="window.app.openHealthNutri()" style="cursor: pointer; transition: transform 0.2s; margin-bottom: 15px;">
                    <div style="display: flex; align-items: center; justify-content: space-between;">
                        <div style="display: flex; align-items: center; gap: 15px;">
                            <div style="width: 50px; height: 50px; background: #e0f2f1; border-radius: 50%; display: flex; align-items: center; justify-content: center; color: #009688; font-size: 20px;"><i class="fa-solid fa-carrot"></i></div>
                            <div><h3 style="margin:0; font-size: 18px; color: var(--text-main);">Meu Nutri</h3><p style="margin:0; font-size: 12px; color: var(--text-sec);">Dieta e suplementação</p></div>
                        </div>
                        <i class="fa-solid fa-chevron-right" style="color: #ccc;"></i>
                    </div>
                </div>
                <div class="card" onclick="window.app.openHealthPhysio()" style="cursor: pointer; transition: transform 0.2s; margin-bottom: 15px;">
                    <div style="display: flex; align-items: center; justify-content: space-between;">
                        <div style="display: flex; align-items: center; gap: 15px;">
                            <div style="width: 50px; height: 50px; background: #e3f2fd; border-radius: 50%; display: flex; align-items: center; justify-content: center; color: var(--primary); font-size: 20px;"><i class="fa-solid fa-user-doctor"></i></div>
                            <div><h3 style="margin:0; font-size: 18px; color: var(--text-main);">Meu Fisio</h3><p style="margin:0; font-size: 12px; color: var(--text-sec);">Relatos e tratamentos</p></div>
                        </div>
                        <div style="display: flex; align-items: center; gap: 10px;">
                            <span id="health-badge-counter" class="hidden" style="background: var(--red); color: white; font-size: 10px; padding: 4px 8px; border-radius: 10px; font-weight: 700;">0</span>
                            <i class="fa-solid fa-chevron-right" style="color: #ccc;"></i>
                        </div>
                    </div>
                </div>
                <div class="card" onclick="window.app.openHealthMental()" style="cursor: pointer; transition: transform 0.2s; margin-bottom: 15px;">
                    <div style="display: flex; align-items: center; justify-content: space-between;">
                        <div style="display: flex; align-items: center; gap: 15px;">
                            <div style="width: 50px; height: 50px; background: #f3e5f5; border-radius: 50%; display: flex; align-items: center; justify-content: center; color: #9c27b0; font-size: 20px;"><i class="fa-solid fa-brain"></i></div>
                            <div><h3 style="margin:0; font-size: 18px; color: var(--text-main);">Mental Health</h3><p style="margin:0; font-size: 12px; color: var(--text-sec);">Equilíbrio e bem-estar</p></div>
                        </div>
                        <i class="fa-solid fa-chevron-right" style="color: #ccc;"></i>
                    </div>
                </div>
            </div>

            <div id="tab-social" class="tab-content hidden" style="padding: 0 20px;">
                <div style="display:flex; justify-content:space-between; align-items:center; margin: 20px 0;">
                    <h2 style="margin:0; color:var(--text-main);">Comunidade</h2>
                    <button onclick="window.app.openCreatePost()" class="btn-primary" style="width: auto; padding: 8px 16px; border-radius: 20px; font-size: 12px; border:none; cursor:pointer;"><i class="fa-solid fa-plus"></i> Novo</button>
                </div>
                <div id="social-feed"></div>
            </div>

            <div id="tab-news" class="tab-content hidden" style="padding: 0 20px;">
                <h2 style="margin: 20px 0; color:var(--text-main);">Novidades</h2>
                <div id="news-feed"></div>
            </div>
        </div>

        <div class="nav-bar">
            <button class="nav-item" onclick="window.app.nav('social')" data-tab="social"><i class="fa-solid fa-users"></i></button>
            <button class="nav-item" onclick="window.app.nav('health')" data-tab="health" style="position: relative;">
                <i class="fa-solid fa-heart-pulse"></i>
                <span id="nav-badge-health" class="hidden" style="position: absolute; top: 5px; right: 25%; width: 8px; height: 8px; background: var(--red); border-radius: 50%; border: 1px solid white;"></span>
            </button>
            <button class="nav-item active" onclick="window.app.nav('home')" data-tab="home"><i class="fa-solid fa-house"></i></button>
            <button class="nav-item" onclick="window.app.nav('workouts')" data-tab="workouts"><i class="fa-solid fa-person-running"></i></button>
            <button class="nav-item" onclick="window.app.nav('news')" data-tab="news"><i class="fa-solid fa-bullhorn"></i></button>
        </div>
    </div>

    <!-- MODAIS GERAIS (ALUNO E ADMIN) -->
    <!-- Todos os modais anteriores continuam aqui (perfil, vídeos, templates, etc) -->
    <!-- ... (Modais mantidos iguais) ... -->
    <div id="view-profile" class="screen full-screen" style="overflow-y: auto; -webkit-overflow-scrolling: touch; background: #FFF;">
        <!-- ... Conteúdo Perfil ... -->
        <div style="padding: 20px; display: flex; justify-content: space-between; align-items: center;">
            <button onclick="window.app.closeProfile()" style="border:none; background:none; font-size:24px; cursor:pointer; color:var(--text-main);"><i class="fa-solid fa-times"></i></button>
            <h3 style="margin:0;">Meu Perfil</h3>
            <button onclick="window.app.logout()" style="border:none; background:none; color:var(--red); font-weight:600; cursor:pointer;">Sair</button>
        </div>
        <div style="padding: 20px; text-align: center;">
            <div style="width: 120px; height: 120px; border-radius: 50%; background: #FFF; margin: 0 auto 20px; overflow: hidden; position: relative; cursor:pointer; border: 4px solid #FFF; box-shadow: var(--shadow);" onclick="document.getElementById('profile-upload').click()">
                <img id="profile-img-big" src="" style="width:100%; height:100%; object-fit:cover; display:none;">
                <div style="position: absolute; bottom: 0; width: 100%; background: rgba(0,0,0,0.5); color: white; font-size: 10px; padding: 4px;">ALTERAR</div>
            </div>
            <input type="file" id="profile-upload" hidden accept="image/*" onchange="window.app.uploadAvatar(this)">
            <h2 id="profile-name-big" style="margin:0; font-size:28px; color:var(--text-main);">NOME</h2>
            <p id="profile-email-big" style="color: var(--text-sec); font-size: 16px;">EMAIL</p>
            <!-- (Resto do perfil simplificado para caber no exemplo) -->
            <button id="btn-add-race" onclick="window.app.showAddRaceModal()" class="btn btn-primary" style="margin-top: 30px;">+ Novo Objetivo</button>
        </div>
    </div>

    <!-- UTILS: MODAIS -->
    <div id="modal-video" class="modal-overlay">
        <div style="width: 100%; max-width: 800px; aspect-ratio: 16/9; background: #000; position: relative; border-radius:20px; overflow:hidden;">
            <button onclick="document.getElementById('modal-video').classList.remove('active'); document.getElementById('video-container').innerHTML='';" style="position: absolute; top: 15px; right: 15px; color: white; background: rgba(0,0,0,0.5); width:35px; height:35px; border-radius:50%; border: none; font-size: 18px; cursor:pointer; z-index:10;">✕</button>
            <div id="video-container" style="width:100%; height:100%;"></div>
        </div>
    </div>
    
    <div id="modal-day-detail" class="modal-overlay">
        <div class="modal-card">
            <h3 id="day-det-title" style="color:var(--primary);">Detalhes do Dia</h3>
            <div id="day-det-content"></div>
            <textarea id="day-det-note" class="input" placeholder="Anotações / Feedback..." style="height:120px; resize:none; margin-top:15px;"></textarea>
            <div style="display:flex; gap:10px; margin-top:20px;">
                <button onclick="document.getElementById('modal-day-detail').classList.remove('active')" class="btn btn-outline">Fechar</button>
                <button onclick="window.app.saveDayNote()" class="btn btn-primary">Salvar Nota</button>
            </div>
        </div>
    </div>

    <div id="modal-finish-workout" class="modal-overlay">
        <div class="modal-card">
            <h3 style="color:var(--text-main);">Como foi o treino?</h3>
            <label class="label" style="margin-top:15px; margin-bottom:10px; display:block;">Nível de Dor (0 - 7)</label>
            <div id="pain-scale-container" style="display:flex; justify-content:center; gap: 5px; flex-wrap: wrap; margin-bottom:20px;"></div>
            <label class="label">O que doeu? / Observações:</label>
            <textarea id="workout-feedback-text" class="input" style="height:100px; resize:none; margin-bottom:20px;" placeholder="Descreva aqui..."></textarea>
            <div style="display:flex; gap:10px;">
                <button onclick="window.app.confirmFinishWorkout()" class="btn btn-primary">Confirmar Conclusão</button>
                <button onclick="document.getElementById('modal-finish-workout').classList.remove('active')" class="btn btn-outline">Cancelar</button>
            </div>
        </div>
    </div>

    <div id="modal-admin-pain-response" class="modal-overlay">
        <div class="modal-card">
            <h3 style="color:var(--text-main);">Orientação do Fisio</h3>
            <div id="adm-pain-detail-view" style="margin-bottom: 20px; font-size: 14px; color: #555; background: #f9f9f9; padding: 10px; border-radius: 10px;"></div>
            <label class="label">Resposta / Recomendação</label>
            <textarea id="adm-pain-response-text" class="input" style="height:120px; resize:none; margin-bottom:20px;" placeholder="Ex: Aplique gelo e descanse por 2 dias..."></textarea>
            <div style="display:flex; gap:10px;">
                <button onclick="window.app.admSendPainResponse()" class="btn btn-primary">Enviar</button>
                <button onclick="document.getElementById('modal-admin-pain-response').classList.remove('active')" class="btn btn-outline">Cancelar</button>
            </div>
        </div>
    </div>

    <div id="modal-add-weight" class="modal-overlay"><div class="modal-card"><h3 style="color:var(--text-main);">Registrar Peso</h3><label class="label">Peso (kg)</label><input type="number" id="new-weight-input" class="input" step="0.1" placeholder="Ex: 75.5" style="margin-bottom:20px;"><div style="display:flex; gap:10px;"><button onclick="window.app.saveNewWeight()" class="btn btn-primary">Salvar</button><button onclick="document.getElementById('modal-add-weight').classList.remove('active')" class="btn btn-outline">Cancelar</button></div></div></div>
    <div id="modal-confirm" class="modal-overlay"><div class="modal-card"><h3 id="confirm-title" style="color:var(--text-main);">Tem Certeza?</h3><p id="confirm-text" style="color:var(--text-sec); font-size:15px; line-height:1.5;"></p><div style="display:flex; gap:10px; margin-top:20px;"><button id="confirm-cancel" class="btn btn-outline">Não</button><button id="confirm-ok" class="btn btn-danger">Sim</button></div></div></div>
    <div id="modal-prompt" class="modal-overlay"><div class="modal-card"><h3 id="prompt-title" style="color:var(--text-main);">Entrada</h3><input id="prompt-input" class="input"><div style="display:flex; gap:10px; margin-top:10px;"><button id="prompt-cancel" class="btn btn-outline">Cancelar</button><button id="prompt-confirm" class="btn btn-primary">OK</button></div></div></div>
    <div id="modal-edit-date" class="modal-overlay"><div class="modal-card"><h3 style="color:var(--text-main);">Alterar Data</h3><input type="date" id="edit-race-date-input" class="input" style="margin-bottom:20px;"><div style="display:flex; gap:10px;"><button onclick="window.app.saveRaceDate()" class="btn btn-primary">Salvar</button><button onclick="document.getElementById('modal-edit-date').classList.remove('active')" class="btn btn-outline">Cancelar</button></div></div></div>
    <div id="modal-add-race" class="modal-overlay"><div class="modal-card"><h3 style="color:var(--text-main);">Novo Objetivo</h3><input id="new-race-name" class="input" placeholder="Ex: Maratona do Rio" style="margin-bottom:10px;"><input id="new-race-dist" class="input" type="number" placeholder="Distância (KM)"><input id="new-race-est-time" class="input" placeholder="Tempo Est"><input type="date" id="new-race-date" class="input"><button onclick="window.app.addStudentRace()" class="btn btn-primary">Salvar</button><button onclick="document.getElementById('modal-add-race').classList.remove('active')" class="btn btn-text">Cancelar</button></div></div>

    <!-- MODAL ADD RACE (ADMIN) -->
    <div id="modal-adm-add-race" class="modal-overlay">
        <div class="modal-card">
            <h3 style="color:var(--text-main);">Adicionar Objetivo</h3>
            <label class="label">Nome da Prova</label><input id="adm-race-name" class="input" placeholder="Ex: Maratona SP">
            <div style="display:flex; gap:10px; margin:10px 0;"><div style="flex:1;"><label class="label">Data Prova</label><input type="date" id="adm-race-date" class="input"></div><div style="flex:1;"><label class="label">Início Treinos</label><input type="date" id="adm-start-date" class="input"></div></div>
            <label class="label">Método</label><select id="adm-race-method" class="input" style="margin-bottom:15px;" onchange="window.app.admToggleRaceMode()"><option value="ia">Gerar com IA</option><option value="template">Usar Modelo</option></select>
            <div id="adm-race-ia-fields"><input id="adm-race-dist" class="input" placeholder="Distância (KM)"><input id="adm-race-time" class="input" placeholder="Tempo Estimado"><input id="adm-race-video" class="input" placeholder="Link Vídeo Fortalecimento"></div>
            <div id="adm-race-tpl-fields" class="hidden"><select id="adm-race-template-select" class="input"></select></div>
            <div style="display:flex; gap:10px; margin-top:15px;"><button onclick="window.app.admConfirmAddRace()" class="btn btn-primary">Criar</button><button onclick="document.getElementById('modal-adm-add-race').classList.remove('active')" class="btn btn-outline">Cancelar</button></div>
        </div>
    </div>

    <!-- MODAL SINGLE WORKOUT -->
    <div id="modal-add-single-workout" class="modal-overlay">
        <div class="modal-card">
            <h3 id="modal-workout-title" style="color:var(--text-main);">Novo Treino</h3>
            <input id="new-w-title" class="input" placeholder="Título" style="margin-bottom:15px;">
            <input id="new-w-desc" class="input" placeholder="Descrição" style="margin-bottom:15px;">
            <input id="new-w-video" class="input" placeholder="Link do Vídeo" style="margin-bottom:15px;">
            <div style="display:flex; gap:10px;">
                <button onclick="window.app.saveSingleWorkout()" class="btn btn-primary">Salvar</button>
                <button onclick="document.getElementById('modal-add-single-workout').classList.remove('active')" class="btn btn-outline">Cancelar</button>
            </div>
        </div>
    </div>

    <div id="modal-select-template" class="modal-overlay"><div class="modal-card"><h3>Selecionar Modelo</h3><div id="template-select-list"></div><label>Início:</label><input type="date" id="template-start-date" class="input"><button onclick="window.app.confirmTemplateImport()" class="btn btn-primary">Importar</button><button onclick="document.getElementById('modal-select-template').classList.remove('active')" class="btn btn-outline">Cancelar</button></div></div>
    <div id="modal-adm-workout-detail" class="modal-overlay"><div class="modal-card"><h3 id="adm-workout-det-title"></h3><p id="adm-workout-det-desc"></p><div id="adm-workout-det-video-container"></div><button onclick="document.getElementById('modal-adm-workout-detail').classList.remove('active')" class="btn btn-outline">Fechar</button></div></div>

    <!-- ============================================= -->
    <!-- DASHBOARD DESKTOP COMPLETO (TODAS AS ABAS)    -->
    <!-- ============================================= -->
    <div id="view-dashboard" class="screen full-screen" style="background:#f4f7f9;">
        <!-- Sidebar -->
        <div class="dash-sidebar">
            <div style="padding: 20px;">
                <h2 style="color:white; margin:0;">NUTS<span style="color:#ff8a41">.admin</span></h2>
            </div>
            <button class="dash-nav-btn active" onclick="window.app.dashTab('overview')" id="btn-dash-overview"><i class="fa-solid fa-chart-pie"></i> Visão Geral</button>
            <button class="dash-nav-btn" onclick="window.app.dashTab('students')" id="btn-dash-students"><i class="fa-solid fa-users"></i> Alunos</button>
            <button class="dash-nav-btn" onclick="window.app.dashTab('physio')" id="btn-dash-physio"><i class="fa-solid fa-user-doctor"></i> Fisio</button>
            <button class="dash-nav-btn" onclick="window.app.dashTab('templates')" id="btn-dash-templates"><i class="fa-solid fa-clipboard-list"></i> Modelos</button>
            <button class="dash-nav-btn" onclick="window.app.dashTab('news')" id="btn-dash-news"><i class="fa-solid fa-newspaper"></i> Notícias</button>
            <button class="dash-nav-btn" onclick="window.app.dashTab('quotes')" id="btn-dash-quotes"><i class="fa-solid fa-quote-left"></i> Frases</button>
            <button class="dash-nav-btn" onclick="window.app.dashTab('videos')" id="btn-dash-videos"><i class="fa-solid fa-video"></i> Vídeos</button>
            
            <button class="dash-nav-btn" onclick="window.app.closeDashboard()" style="margin-top:auto;"><i class="fa-solid fa-arrow-left"></i> Voltar pro App</button>
        </div>
        
        <!-- Main Content -->
        <div class="dash-content">
            <div class="dash-header">
                <h2 id="dash-title">Painel de Controle</h2>
                
                <!-- Filtros (Só aparece na aba Students, controlado via JS) -->
                <div id="dash-filters-wrapper" class="dash-filters-container hidden" style="display:flex; gap:10px; align-items:center;">
                    <select id="dash-filter-status" style="padding:10px; border-radius:10px; border:1px solid #ddd; margin-right:10px;" onchange="window.app.dashFilterStatus()">
                        <option value="all">Todos os Status</option>
                        <option value="active">Ativos</option>
                        <option value="pending">Pendentes</option>
                        <option value="risk">Risco / Inativos</option>
                    </select>
                    <span style="font-size:12px; color:#888;">Treinou de:</span>
                    <input type="date" id="dash-date-start" style="padding:8px; border-radius:8px; border:1px solid #ddd;">
                    <span style="font-size:12px; color:#888;">até</span>
                    <input type="date" id="dash-date-end" style="padding:8px; border-radius:8px; border:1px solid #ddd;">
                    <button onclick="window.app.dashFilterByDate()" style="background:var(--primary); color:white; border:none; padding:8px 15px; border-radius:8px; cursor:pointer;">Filtrar</button>
                    <div style="width:1px; height:20px; background:#ccc; margin:0 10px;"></div>
                    <input id="dash-search" placeholder="Buscar aluno..." onkeyup="window.app.dashSearch()" style="padding:10px; border-radius:10px; border:1px solid #ddd; width:200px;">
                </div>
            </div>

            <!-- VIEW: ALUNOS / OVERVIEW -->
            <div id="dash-tab-students" class="dash-view">
                <div class="dash-metrics-row">
                    <div class="dash-metric-card" style="border-left:4px solid var(--success);"><span>Total Alunos</span><strong id="dash-total-students">0</strong></div>
                    <div class="dash-metric-card" style="border-left:4px solid var(--red);"><span>Em Risco (>10 dias)</span><strong id="dash-risk-students">0</strong></div>
                    <div class="dash-metric-card" style="border-left:4px solid var(--primary);"><span>Treinaram Hoje</span><strong id="dash-active-today">0</strong></div>
                </div>
                <div class="dash-table-container">
                    <table class="dash-table">
                        <thead><tr><th>Nome</th><th>Email</th><th>Status</th><th>Último Treino</th><th>Dias Parado</th><th>Plano Atual</th><th>Ações</th></tr></thead>
                        <tbody id="dash-table-body"></tbody>
                    </table>
                </div>
            </div>

            <!-- VIEW: DETALHES DO ALUNO -->
            <div id="dash-tab-student-detail" class="dash-view hidden"></div>

            <!-- VIEW: FISIO -->
            <div id="dash-tab-physio" class="dash-view hidden">
                <div class="dash-table-container">
                    <table class="dash-table">
                        <thead><tr><th>Data</th><th>Aluno</th><th>Treino</th><th>Nível Dor</th><th>Descrição</th><th>Status</th><th>Ação</th></tr></thead>
                        <tbody id="dash-physio-body"></tbody>
                    </table>
                </div>
            </div>

            <!-- VIEW: MODELOS (TEMPLATES) -->
            <div id="dash-tab-templates" class="dash-view hidden">
                <button onclick="window.app.admAddTemplateInline()" class="btn-primary" style="width:auto; margin-bottom:20px;">+ Novo Modelo</button>
                <div id="dash-templates-list" style="display:flex; flex-direction:column; gap:15px;"></div>
            </div>

            <!-- VIEW: NOTÍCIAS -->
            <div id="dash-tab-news" class="dash-view hidden">
                <div class="dash-form-card">
                    <h4>Publicar Novidade</h4>
                    <div style="display:flex; gap:10px;">
                        <input id="dash-news-title" class="dash-input" placeholder="Título">
                        <button onclick="document.getElementById('dash-news-file').click()" class="btn-outline" style="width:auto;">Foto</button>
                        <input type="file" id="dash-news-file" hidden onchange="window.app.previewDashNewsImg(this)">
                    </div>
                    <textarea id="dash-news-body" class="dash-input" style="height:80px; margin-top:10px;" placeholder="Texto..."></textarea>
                    <img id="dash-news-preview" style="height:100px; display:none; margin:10px 0; border-radius:10px;">
                    <button id="btn-dash-post-news" onclick="window.app.postNewsDash()" class="btn-primary" style="width:auto; margin-top:10px;">Publicar</button>
                </div>
                <div id="dash-news-grid" class="dash-grid-cards"></div>
            </div>

            <!-- VIEW: FRASES -->
            <div id="dash-tab-quotes" class="dash-view hidden">
                <div class="dash-form-card">
                    <div style="display:flex; gap:10px;">
                        <input id="dash-quote-text" class="dash-input" placeholder="Digite a frase motivacional...">
                        <button onclick="window.app.postQuoteDash()" class="btn-primary" style="width:auto;">Adicionar</button>
                    </div>
                </div>
                <div id="dash-quotes-list" style="display:flex; flex-direction:column; gap:10px;"></div>
            </div>

            <!-- VIEW: VÍDEOS -->
            <div id="dash-tab-videos" class="dash-view hidden">
                <div class="dash-form-card">
                    <div style="display:flex; gap:10px;">
                        <input id="dash-video-title" class="dash-input" placeholder="Título do Exercício">
                        <input id="dash-video-link" class="dash-input" placeholder="Link (Youtube/etc)">
                        <button onclick="window.app.admAddStrengthVideoDash()" class="btn-primary" style="width:auto;">Cadastrar</button>
                    </div>
                </div>
                <div id="dash-videos-grid" class="dash-grid-cards"></div>
            </div>

        </div>
    </div>

    <!-- VIEW ADMIN LEGADO (ESCONDIDO/BACKUP) -->
    <div id="view-admin" class="screen full-screen hidden"></div>

    <script type="module" src="app.js?v=8"></script>
</body>
</html>
